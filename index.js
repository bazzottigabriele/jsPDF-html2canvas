function html2PDF(dom,opts={}){opts=Object.assign({jsPDF:{unit:'pt',format:'a4'},imageType:'image/jpeg',customFont:'',output:'js.pdf',success:function(pdf){pdf.save(opts.output);}},opts);html2canvas(dom,{onrendered(canvas){let contentWidth=canvas.width,contentHeight=canvas.height;let pageHeight=contentWidth/595.28*841.89,leftHeight=contentHeight;let position=0;let imgWidth=595.28,imgHeight=595.28/contentWidth*contentHeight;let pageData=canvas.toDataURL(opts.imageType,1.0);let images=function(type){let types={'image/jpeg':'JPEG','image/png':'PNG','image/webp':'WEBP'};return types[type];};let pdf=new jsPDF(opts.jsPDF);pdf.setFont(opts.customFont);if(leftHeight<pageHeight){pdf.addImage(pageData,images(opts.imageType),0,0,imgWidth,imgHeight);}else{while(leftHeight>0){pdf.addImage(pageData,images(opts.imageType),0,position,imgWidth,imgHeight);leftHeight-=pageHeight;position-=841.89;if(leftHeight>0){pdf.addPage();}}} opts.success(pdf);}})}